{{ $base := "" | absLangURL }}
{{ $dot := . }}
{{ $SignUpClass := .Site.Params.signUpClass }}

<nav class="main-nav">
    <div class="container d-flex position-relative">

      <div class="d-none d-lg-flex w-100">
        {{/*  Left menu items START  */}}
        <ul class="d-flex flex-row align-items-center list-unstyled mb-0 mr-auto">
          {{ range .Site.Menus.main_left }}
            {{ if .HasChildren }}
              <li class="dropdown {{ .Identifier }}-dropdown">
                  <a href="{{- partial "menulink" (slice .Identifier ( .URL ) $base $dot ) | safeURL -}}" class="dropdown {{ if eq .Name "Solutions" }} solutions pr-lg-6 pr-xl-9 {{ end }}">{{.Name}}</a>
        
                  <!-- Menu: Solutions menu -->
                  {{ if eq .Identifier "solutions" }}
                    <ul class="dropdown-menu solutions-menu p-2">
                      <div class="row">
                        <div class="col-4">
                          <p class="text-gray-dark small text-uppercase font-weight-semibold no-event">Industry</p>
                          {{ range .Children }}
                            {{ if eq .Title "industry" }}
                              <li>
                                  <a class="d-block" href="{{- partial "menulink" (slice .Identifier ( .URL ) $base $dot ) | safeURL -}}"><span class="menu-text">{{ .Name | safeHTML }}</span></a>
                              </li>
                            {{ end }}
                          {{ end }}
                        </div>
                        <div class="col-4">
                          <p class="text-gray-dark small text-uppercase font-weight-semibold no-event">Technology</p>
                          {{ range .Children }}
                            {{ if eq .Title "technology" }}
                              <li>
                                  <a class="d-block" href="{{- partial "menulink" (slice .Identifier ( .URL ) $base $dot ) | safeURL -}}"><span class="menu-text">{{ .Name | safeHTML }}</span></a>
                              </li>
                            {{ end }}
                          {{ end }}
                        </div>
                        <div class="col-4">
                          <p class="text-gray-dark small text-uppercase font-weight-semibold no-event">Use-Case</p>
                          {{ range .Children }}
                            {{ if eq .Title "usecase" }}
                              <li>
                                  <a class="d-block" href="{{- partial "menulink" (slice .Identifier ( .URL ) $base $dot ) | safeURL -}}"><span class="menu-text">{{ .Name | safeHTML }}</span></a>
                              </li>
                            {{ end }}
                          {{ end }}
                        </div>
                      </div>
                    </ul>
                  <!--/ Menu: Solutions menu -->
        
                  <!-- Menu: with sub-menus -->
                  {{ else if eq .Identifier "product" }}
                    <ul class="dropdown-menu product-menu p-2">
                      {{ range .Children }}
                      <li>
                          <a class="d-block" href="{{- partial "menulink" (slice .Identifier ( .URL ) $base $dot ) | safeURL -}}">{{ .Pre }} <span class="menu-text d-inline-flex">{{ .Name | safeHTML }}</span></a>
                      </li>
                      {{end}}
                    </ul>
                  {{ else }}
                    <ul class="dropdown-menu p-2">
                      {{ range .Children }}
                      <li>
                          <a class="d-block" href="{{- partial "menulink" (slice .Identifier ( .URL ) $base $dot ) | safeURL -}}"><span class="menu-text">{{ .Name | safeHTML }}</span></a>
                      </li>
                      {{end}}
                    </ul>
                  {{ end }}
                  <!--/ Menu: with sub-menus -->
              </li>
        
            <!-- Menu: without sub-menus -->
            {{ else }}
              <li>
                  <a class="{{ .Identifier }}-menu" href="{{- partial "menulink" (slice .Identifier ( .URL ) $base $dot ) | safeURL -}}"><span class="menu-text">{{ .Name | safeHTML }}</span></a>
              </li>
            {{ end }}
            <!--/ Menu: without sub-menus -->
          {{ end }}
        </ul>
        {{/*  Left menu items END  */}}

        {{/*  Right menu items START  */}}
        <ul class="d-flex flex-row align-items-center list-unstyled mb-0">
          {{ range .Site.Menus.main_right }}
          {{ if .HasChildren }}
              <li class="dropdown">
                <a href="{{- partial "menulink" (slice .Identifier ( .URL ) $base $dot ) | safeURL -}}" class="dropdown">{{.Name}}</a>
                <ul class="dropdown-menu p-2" aria-labelledby="dropdownMenuButton">
                  {{ range .Children }}
                  <li>
                      <a class="d-block" href="{{- partial "menulink" (slice .Identifier ( .URL ) $base $dot ) | safeURL -}}"><span class="menu-text">{{ .Name | safeHTML }}</span></a>
                  </li>
                  {{end}}
                </ul>
              </li>
            {{ else }}
              <li class="final">
                  <a class="{{ if eq .Identifier "get_started" }}
                      {{ $SignUpClass }} btn btn-gradient js-cta-topRight
                    {{ end }}" href="{{- partial "menulink" (slice .Identifier ( .URL ) $base $dot ) | safeURL -}}" data-event-category="Signup" data-event-action="Step 1 Top Right Initiated" data-event-label="{{ "{{url path}}" }}" {{ with $dot.Params.header_button_modal }} data-toggle="modal" data-target="#modal-{{- . -}}" {{ end }}>
                      {{ if eq .Identifier "get_started" }}
                        {{ if $.Params.custom_cta_msg }}
                        <span class="d-none d-lg-block">{{ $.Params.custom_cta_msg }}</span>
                        {{ else }}
                          <span class="d-none d-xl-block">{{ i18n "get_started_free" }}</span>
                          <span class="d-block d-xl-none">{{ i18n "get_started_free_short" }}</span>
                        {{ end }}
                      {{ else }}
                        <span class="menu-text">{{ .Name | safeHTML }}</span>
                      {{ end }}</a>
              </li>
            {{end}}
          {{end}}
        </ul>
        {{/*  Right menu items END  */}}
      </div>
      
      {{/*  desktop bits logo START  */}}
 
      <div class="position-absolute" style="top: 50%; left: 50%; transform: translate(-50%, -50%)">
        <a href="{{ .Site.BaseURL | absLangURL }}" class="js-logo-download d-none d-lg-flex flex-column align-items-center justify-content-center position-relative" >
          <img class="bits-logo-lg" src="{{ $.Site.Params.img_url}}img/dd_logo_n_70x75.png{{.Site.Params.imgix.png}}" alt="Datadog Logo">
          <img class="datadog-text-logo-lg" src="{{ $.Site.Params.img_url }}img/dd-logo-n-200.png{{.Site.Params.imgix.png}}" alt="Datadog logo">
          {{- partial "nav/nav-logo-download" . -}}
        </a>
      </div>
        
        
   
      {{/*  desktop bits logo END  */}}

      {{/*  mobile bits logo START  */}}
      <div class="d-flex d-lg-none align-items-center justify-content-center">
        <a href="{{ $.Site.BaseURL | absLangURL }}">
          <img src="{{ $.Site.Params.img_url}}img/datadog_rbg_n_2x.png{{.Site.Params.imgix.png}}" class="bits-logo-mobile d-inline-block" alt="Datadog Logo">
        </a>
        
      </div>
      {{/*  mobile bits logo END  */}}

      <button type="button" class="navbar-toggler ml-auto mr-0" data-toggle="" data-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

    </div>
</nav>

<div id="mobile-nav-bg">
</div>

<div id="mobile-nav">
  {{- partial "nav/menu-mobile" . -}}
</div>
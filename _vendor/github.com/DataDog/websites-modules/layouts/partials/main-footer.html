{{ $dot := . }}

<footer class="pt-3">
    <div class="container">
        <div class="row mb-0 mb-lg-5">
            <div class="col-12 col-lg-3 footer-side">
                <a href="#" class="mb-2 mb-lg-4 js-cta-footer {{ if .Params.bottom_footer_trigger }} {{ .Params.bottom_footer_trigger }} {{ else }} sign-up-trigger {{ end }} btn btn-white btn-outline btn-block" data-event-category="Signup" data-event-action="Step 1 Footer Initiated" data-event-label="{{ "{{url path}}" }}">
                    {{ i18n "free_trial" }}
                </a>
                <p class="font-weight-semibold text-center text-lg-left">Download mobile app</p>
                
                <div class="d-flex d-lg-none justify-content-center ">
                    <a href="https://apps.apple.com/app/datadog/id1391380318" class="mr-1" aria-label="Apple Store Link">
                        {{ partial "svg" (dict "context" $dot "src" "app-store-badge.svg" )}}
                    </a>             
                    <a href="https://play.google.com/store/apps/details?id=com.datadog.app" aria-label="Google Play Store Link">
                        {{ partial "svg" (dict "context" $dot "src" "google-play-badge.svg" )}}  
                    </a>
                </div>

                <div class="d-none d-lg-flex justify-content-lg-start">
                    <a href="https://apps.apple.com/app/datadog/id1391380318" class="mr-2" aria-label="Apple Store Link">
                        {{ partial "svg" (dict "context" $dot "src" "apple.svg" )}}
                    </a>             
                    <a href="https://play.google.com/store/apps/details?id=com.datadog.app" aria-label="Google Play Store Link">
                        {{ partial "svg" (dict "context" $dot "src" "google-play.svg" )}}  
                    </a>
                </div>
            </div>
            <div class="col-12 col-lg-6  mt-3 mt-lg-0">

                <p class="border-bottom border-gray">{{ i18n "product" }}</p>

                {{ $lenFooterProduct := len .Site.Menus.footer_product }}
                {{ $secondHalfFooterProduct := div $lenFooterProduct 2 }}
                {{ $firstHalfFooterProduct := sub $lenFooterProduct  $secondHalfFooterProduct }}

                <div class="row">
                    <div class="col-6 col-lg-4">
                        <ul class="footer-menu mt-1">
                            {{ range first $firstHalfFooterProduct .Site.Menus.footer_product }}
                                <li>
                                    {{ if eq $.Site.Params.full_translation true }}
                                        {{ partial "footer_link" (dict "footer_link" . "base_url" ( .URL | absLangURL) ) }}
                                    {{ else }}
                                        {{ partial "footer_link" (dict "footer_link" . "base_url" ( .URL | absURL) ) }}
                                    {{ end }}
                                </li>
                            {{ end }}
                        </ul>
                    </div>
                    <div class="col-6 col-lg-4">
                        <ul class="footer-menu mt-1">
                            {{ range last $secondHalfFooterProduct .Site.Menus.footer_product }}
                                <li>
                                    {{ if eq $.Site.Params.full_translation true }}
                                        {{ partial "footer_link" (dict "footer_link" . "base_url" ( .URL | absLangURL) ) }}
                                    {{ else }}
                                        {{ partial "footer_link" (dict "footer_link" . "base_url" ( .URL | absURL) ) }}
                                    {{ end }}
                                </li>
                            {{ end }}
                        </ul>
                    </div>
                    <div class="col-12 d-block d-lg-none">
                        <hr class="mb-0  border-top border-gray">
                    </div>

                    <div class="d-none d-lg-block col-lg-4 ">
                        <ul class="footer-menu mt-1">
                            {{ range .Site.Menus.footer_product_three }}
                            <li>
                                {{ if eq $.Site.Params.full_translation true }}
                                    {{ partial "footer_link" (dict "footer_link" . "base_url" ( .URL | absLangURL) ) }}
                                {{ else }}
                                    {{ partial "footer_link" (dict "footer_link" . "base_url" ( .URL | absURL) ) }}
                                {{ end }}
                            </li>
                            {{end}}
                        </ul>
                    </div>
                    
                    <div class="col-6 d-lg-none">
                        <ul class="footer-menu mt-1">
                            {{ range first 3 .Site.Menus.footer_product_three }}
                            <li>
                                {{ if eq $.Site.Params.full_translation true }}
                                    {{ partial "footer_link" (dict "footer_link" . "base_url" ( .URL | absLangURL) ) }}
                                {{ else }}
                                    {{ partial "footer_link" (dict "footer_link" . "base_url" ( .URL | absURL) ) }}
                                {{ end }}
                            </li>
                            {{end}}
                        </ul>
                    </div>

                    <div class="col-6 d-lg-none">
                        <ul class="footer-menu mt-1">
                            {{ range last 2 .Site.Menus.footer_product_three }}
                            <li>
                                {{ if eq $.Site.Params.full_translation true }}
                                    {{ partial "footer_link" (dict "footer_link" . "base_url" ( .URL | absLangURL) ) }}
                                {{ else }}
                                    {{ partial "footer_link" (dict "footer_link" . "base_url" ( .URL | absURL) ) }}
                                {{ end }}
                            </li>
                            {{end}}
                        </ul>
                    </div>
                   
                </div>


            </div>
            <div class="col-12 col-lg-3 mt-3 mt-lg-0">
                <div class="row">
                    <div class="col-6 col-lg-8">
                        <p class="border-bottom border-gray">{{ i18n "about" }}</p>
                        <ul class="footer-menu mt-1">
                            {{ range .Site.Menus.footer_about }}
                            <li>
                                {{ if eq $.Site.Params.full_translation true }}
                                    {{ partial "footer_link" (dict "footer_link" . "base_url" ( .URL | absLangURL) ) }}
                                {{ else }}
                                    {{ partial "footer_link" (dict "footer_link" . "base_url" ( .URL | absURL) ) }}
                                {{ end }}
                            </li>
                            {{end}}
                        </ul>
                    </div>
                    <div class="col-6 col-lg-4">
                        <p class="border-bottom border-gray">{{ i18n "blog" }}</p>
                        <ul class="footer-menu mt-1">
                            {{ range .Site.Menus.footer_blog }}
                            <li>
                                {{ if eq (substr .URL 0 1) "/" }}
                                    <!-- to specifig lang page e.g /es/blog -->
                                    {{ if $.Site.Params.branch }}
                                        {{ $.Scratch.Set "flink" ( (print "/" $.Site.Params.branch .URL) | absURL) }}
                                    {{ else }}
                                        {{ $.Scratch.Set "flink" ( .URL | absURL) }}
                                    {{ end }}
                                    {{ partial "footer_link" (dict "footer_link" . "base_url" ($.Scratch.Get "flink") ) }}
                                {{ else }}
                                    {{ if eq $.Site.Params.full_translation true }}
                                        {{ partial "footer_link" (dict "footer_link" . "base_url" ( .URL | absLangURL) ) }}
                                    {{ else }}
                                        {{ partial "footer_link" (dict "footer_link" . "base_url" ( .URL | absURL) ) }}
                                    {{ end }}
                                {{ end }}
                            </li>
                            {{end}}
                        </ul>
                    </div>
                    
                </div>

            </div>
            
        </div>
    </div>
    <div class="mt-3 mt-lg-0">
        <div>
            <div class="my-1 border-top border-gray-darker"></div>
        </div>
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="row mb-1 align-items-center">
                        <div class="col-6 col-lg-1 offset-lg-3 mb-1 mb-lg-0">
                            <div class="footer-menu d-flex align-items-center">
                                <!-- languages to be displayed -->
                                {{ $dot.Scratch.Add "translated_lang" (slice "en" "ja" ) }}
                                <!--/ languages to be displayed -->

                                {{ if ne (len .Translations) 0 }}
                                    {{ range .Translations }}
                                        {{ if in ($dot.Scratch.Get "translated_lang") .Language.Lang }}
                                            <a class="button is-small is-danger is-rounded d-flex align-items-center text-white" href="{{ .Permalink }}?lang_pref={{ .Language.Lang }}">{{ partial "svg" (dict "context" $dot "src" "world.svg" "size" "15px" "color" "#ffffff"  )}}&nbsp;<span style="transform: translateY(-1px);">{{ .Language.LanguageName }}</span></a>
                                        {{ end }}
                                    {{ end }}
                                {{ end}}
                           
                            </div>
                        </div>
                        <div class="col-6 col-lg-2 mb-1 mb-lg-0 d-flex justify-content-lg-end">
                            <ul class="footer-menu d-flex  align-items-center">
                                {{ range $index, $value := .Site.Menus.footer_social }}
                                <li class="d-flex align-items-center {{ if ne $index ( sub (len $.Site.Menus.footer_social) 1 ) }} mr-2 {{end}}">
                                    <a class="d-flex align-items-center" href="{{ .URL | absURL }}" aria-label="{{ .Name }} link">{{ partial "svg" (dict "context" $dot "src" .Pre  )}}  </a>
                                </li>
                                {{end}}
                            </ul>
                        </div>
                        <div class="col-12 col-lg-6 order-lg-first d-flex align-items-center" style="transform: translateY(-2px);">
                            <span class="copyright">&copy; Datadog {{ $date := now }} {{ $date.Format "2006"}} &nbsp;</span>
                            <ul class="footer-menu d-flex align-items-center">
                                {{ range $index, $v := .Site.Menus.footer_sub }}
                                    <li class="d-flex align-items-center">
                                        {{ if eq $.Site.Params.full_translation true }}
                                            <a href="{{ .URL | absLangURL }}">{{$v.Name}}</a>{{ if ne $index ( sub (len $.Site.Menus.footer_sub) 1 ) }}<span style="font-size: 16px; transform: translateY(-1px);">&nbsp;|&nbsp;</span>{{end}}
                                        {{ else }}
                                            <a href="{{ .URL | absURL}}">{{$v.Name}}</a>{{ if ne $index ( sub (len $.Site.Menus.footer_sub) 1 ) }}<span style="font-size: 16px; transform: translateY(-1px);">&nbsp;|&nbsp;</span>{{end}}
                                        {{ end }}
                                    </li>
                                {{ end }}
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        
    </div>
</footer>